<div class="search-container">
  <div class="search-header">
    <h1>üé¨ Catalogue Project</h1>
    <p class="subtitle">Search for TV programs and broadcasts</p>
  </div>

  <!-- Search bar -->
  <form class="search-form" (ngSubmit)="onSubmit($event)">
    <div class="search-input-group">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        name="searchTerm"
        placeholder="Search for a program... (e.g. Breaking Bad, Game of Thrones)"
        class="search-input"
        [class.error]="error"
      />
      <button
        type="submit"
        class="search-button"
        [disabled]="loading"
      >
        {{ loading ? 'üîÑ Searching...' : 'üîç Search' }}
      </button>
    </div>

    <!-- Error message -->
    @if (error) {
      <div class="error-message">
        ‚ö†Ô∏è {{ error }}
      </div>
    }
  </form>

  <!-- Loading spinner -->
  @if (loading) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Searching...</p>
    </div>
  }

  <!-- Results -->
  @if (searched && !loading) {
    <div class="results-section">
      <h2 class="results-title">
        {{ results.length > 0 ? results.length + ' program(s) found' : 'No results' }}
      </h2>

      @if (results.length === 0) {
        <div class="no-results">
          <p>üòï No program matches your search.</p>
          <p class="hint">Try another title or check the spelling.</p>
        </div>
      }

      <!-- Liste des programmes -->
      <div class="results-grid">
        @for (item of results; track item.programme.ID) {
          <div
            class="programme-card"
            (click)="viewProgramme(item.programme.ID)"
          >
            <div class="card-header">
              <h3 class="programme-title">{{ item.programme.NAME }}</h3>
              @if (item.programme.YEAR) {
                <span class="programme-year">{{ item.programme.YEAR }}</span>
              }
            </div>

            <div class="card-body">

              @if (item.programme.SUMMARY) {
                <p class="programme-summary">
                  {{ item.programme.SUMMARY.substring(0, 150) }}{{ item.programme.SUMMARY.length > 150 ? '...' : '' }}
                </p>
              }

              <div class="card-footer">
                <span class="launches-count">
                  üì∫ {{ item.launches.length }} launch(es)
                </span>
                <span class="view-link">View details ‚Üí</span>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  }
</div>

